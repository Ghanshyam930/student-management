
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Teacher Panel </title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
  :root {
    --primary: #4361ee;
    --secondary: #3f37c9;
    --dark: #1e2a38;
    --light: #f4f7fa;
    --success: #4cc9f0;
    --warning: #f8961e;
    --danger: #f94144;
  }
  
  body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: #f4f7fa;
    height: 100vh;
    color: #333;
  }
  
  .container {
    display: flex;
  }
  
  .sidebar {
    width: 250px;
    background: var(--dark);
    color: white;
    padding: 20px 0;
    height: 100vh;
    box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    position: fixed;
  }
  
  .sidebar-header {
    padding: 0 20px 20px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
  }
  
  .sidebar h2 {
    font-size: 22px;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .sidebar h2 i {
    color: var(--primary);
  }
  
  .sidebar ul {
    list-style: none;
    padding: 20px 0;
    margin: 0;
  }
  
  .sidebar li {
    padding: 12px 20px;
    border-radius: 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s;
  }
  
  .sidebar li:hover {
    background: rgba(255,255,255,0.1);
  }
  
  .sidebar .active {
    background: var(--secondary);
    border-left: 4px solid var(--success);
  }
  
  .sidebar li i {
    width: 20px;
    text-align: center;
  }
  
  .logout-btn {
    color: var(--danger);
  }
  
  .main {
    flex: 1;
    padding: 30px;
    overflow-y: auto;
    margin-left: 250px;
  }
  
  /* Pages */
  .page {
    display: none;
    animation: fadeIn 0.5s;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .active-page {
    display: block;
  }
  
  /* Header */
  .page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
  }
  
  .page-header h1 {
    margin: 0;
    color: var(--dark);
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  /* Cards */
  .card, form, .profile-card {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-bottom: 25px;
  }
  
  .card h2 {
    margin-top: 0;
    color: var(--secondary);
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
  }
  
  /* Tables */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
  }
  
  th, td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #eee;
  }
  
  th {
    background: var(--light);
    font-weight: 600;
  }
  
  tr:hover {
    background: rgba(0,0,0,0.02);
  }
  
  .action-btn {
    padding: 6px 12px;
    border-radius: 4px;
    border: none;
    cursor: pointer;
    margin-right: 5px;
    font-size: 14px;
    transition: all 0.2s;
  }
  
  .edit-btn {
    background: var(--warning);
    color: white;
  }
  
  .delete-btn {
    background: var(--danger);
    color: white;
  }
  
  .view-btn {
    background: var(--success);
    color: white;
  }
  
  .add-btn {
    background: var(--primary);
    color: white;
  }
  
  /* Profile Section */
  .profile-section {
    display: flex;
    gap: 30px;
    margin-bottom: 30px;
  }
  
  .profile-pic {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    border: 5px solid var(--light);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }
  
  .profile-info {
    flex: 1;
  }
  
  .profile-name {
    font-size: 24px;
    margin: 0 0 10px;
    color: var(--dark);
  }
  
  .profile-title {
    color: var(--secondary);
    font-weight: 500;
    margin-bottom: 15px;
  }
  
  .profile-details {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
  }
  
  .detail-item {
    margin-bottom: 10px;
  }
  
  .detail-label {
    font-weight: 500;
    color: #666;
  }
  
  /* Schedule Grid */
  .schedule-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 15px;
    margin-top: 20px;
  }
  
  .schedule-header {
    font-weight: bold;
    background: var(--light);
    padding: 10px;
    text-align: center;
    border-radius: 6px;
  }
  
  .schedule-cell {
    background: white;
    padding: 10px;
    border-radius: 6px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    min-height: 80px;
  }
  
  .schedule-item {
    background: #e6f7ff;
    padding: 8px;
    margin-bottom: 8px;
    border-radius: 4px;
    border-left: 3px solid var(--primary);
  }
  
  .no-class {
    color: #999;
    font-style: italic;
    text-align: center;
    padding: 10px;
  }
  
  /* Camera Modal */
  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    z-index: 1000;
    align-items: center;
    justify-content: center;
  }
  
  .modal-content {
    background: white;
    width: 90%;
    max-width: 800px;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    position: relative;
  }
  
  .close-modal {
    position: absolute;
    top: 15px;
    right: 15px;
    font-size: 24px;
    cursor: pointer;
    color: #666;
  }
  
  .camera-container {
    width: 100%;
    margin-bottom: 20px;
    position: relative;
  }
  
  #camera-preview {
    width: 100%;
    max-height: 400px;
    background: #eee;
    border-radius: 8px;
  }
  
  #face-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
  
  .face-box {
    position: absolute;
    border: 2px solid #00ff00;
    background: rgba(0, 255, 0, 0.1);
    display: flex;
    align-items: flex-end;
    justify-content: center;
  }
  
  .face-label {
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 2px 5px;
    font-size: 12px;
    border-radius: 4px;
    margin-bottom: 5px;
  }
  
  .camera-controls {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
  }
  
  .capture-btn {
    padding: 12px 25px;
    background: var(--primary);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  /* Attendance Status */
  .attendance-status {
    display: inline-block;
    padding: 5px 10px;
    border-radius: 20px;
    font-weight: bold;
    font-size: 0.85rem;
  }
  
  .present {
    background: #e6f7ee;
    color: #28a745;
  }
  
  .absent {
    background: #fde8e8;
    color: #dc3545;
  }
  
  .late {
    background: #fff3e0;
    color: #fd7e14;
  }
  
  /* Student List for Attendance */
  .student-attendance-list {
    max-height: 300px;
    overflow-y: auto;
    margin-top: 20px;
    border: 1px solid #eee;
    border-radius: 8px;
    padding: 10px;
  }
  
  .student-attendance-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    border-bottom: 1px solid #eee;
  }
  
  .student-attendance-item:last-child {
    border-bottom: none;
  }
  
  .student-info {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .student-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
  }
  
  /* Edit Form Styles */
  .edit-form {
    display: none;
    background: #f9f9f9;
    padding: 15px;
    border-radius: 8px;
    margin-top: 10px;
    border: 1px solid #ddd;
  }
  
  .edit-form.active {
    display: block;
  }
  
  .edit-form input,
  .edit-form select {
    width: 100%;
    padding: 8px;
    margin-bottom: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  
  .edit-form-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 10px;
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    .container {
      flex-direction: column;
    }
    
    .sidebar {
      width: 100%;
      height: auto;
      position: relative;
    }
    
    .main {
      margin-left: 0;
    }
    
    .profile-section {
      flex-direction: column;
    }
    
    .profile-pic {
      align-self: center;
    }
    
    .profile-details {
      grid-template-columns: 1fr;
    }
    
    .schedule-grid {
      grid-template-columns: 1fr;
    }
  }
  </style>
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <h2><i class="fas fa-chalkboard-teacher"></i> Teacher Panel</h2>
      </div>
      <ul>
        <li data-page="dashboard" class="active">
          <i class="fas fa-tachometer-alt"></i> Dashboard
        </li>
        <li data-page="profile">
          <i class="fas fa-user"></i> My Profile
        </li>
        <li data-page="timetable">
          <i class="fas fa-calendar-alt"></i> Timetable
        </li>
        <li data-page="attendance">
          <i class="fas fa-calendar-check"></i> Attendance
        </li>
        <li data-page="students">
          <i class="fas fa-users"></i> Students
        </li>
        <li data-page="subjects">
          <i class="fas fa-book"></i> Subjects
        </li>
        <li class="logout-btn">
          <i class="fas fa-sign-out-alt"></i> Logout
        </li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="main">
      <!-- Dashboard Page -->
      <div id="dashboard" class="page active-page">
        <div class="page-header">
          <h1><i class="fas fa-home"></i> Welcome, {{ user.first_name }}!  üë®‚Äçüè´</h1>
          <div id="current-date" style="font-weight: bold; color: var(--secondary);"></div>
        </div>
        
        <div class="card">
          <h2><i class="fas fa-calendar-day"></i> Today's Schedule</h2>
          <table>
            <thead>
              <tr>
                <th>Time</th>
                <th>Subject</th>
                <th>Class</th>
                <th>Room</th>
                <th>Attendance</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>10:30 AM - 12:00 PM</td>
                <td>Mobile Computing</td>
                <td>Diploma 3rd Year</td>
                <td>Lab 1</td>
                <td>
                  <button class="action-btn view-btn" onclick="takeAttendance('MC101', 'Diploma 3rd Year')">
                    <i class="fas fa-camera"></i> Take Attendance
                  </button>
                </td>
              </tr>
              <tr>
                <td>12:30 PM - 02:00 PM</td>
                <td>Artificial Intelligence</td>
                <td>Diploma 2nd Year</td>
                <td>Room 205</td>
                <td>
                  <button class="action-btn view-btn" onclick="takeAttendance('AI201', 'Diploma 2nd Year')">
                    <i class="fas fa-camera"></i> Take Attendance
                  </button>
                </td>
              </tr>
              <tr>
                <td>03:00 PM - 04:30 PM</td>
                <td>Project Management</td>
                <td>Diploma 3rd Year</td>
                <td>Room 302</td>
                <td>
                  <button class="action-btn view-btn" onclick="takeAttendance('PM301', 'Diploma 3rd Year')">
                    <i class="fas fa-camera"></i> Take Attendance
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="card">
          <h2><i class="fas fa-bell"></i> Upcoming Activities</h2>
          <ul style="list-style-type: none; padding: 0;">
            <li style="padding: 10px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
              <span>Mobile Computing practical test tomorrow</span>
              <button class="action-btn view-btn" onclick="showPage('subjects')">
                <i class="fas fa-eye"></i> View
              </button>
            </li>
            <li style="padding: 10px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
              <span>3 Attendance records pending verification</span>
              <button class="action-btn view-btn" onclick="showPage('attendance')">
                <i class="fas fa-eye"></i> View
              </button>
            </li>
            <li style="padding: 10px 0; display: flex; justify-content: space-between; align-items: center;">
              <span>Faculty meeting at 4:30 PM today</span>
              <button class="action-btn edit-btn">
                <i class="fas fa-calendar"></i> Remind Me
              </button>
            </li>
          </ul>
        </div>
      </div>

      <!-- Profile Page -->
      <div id="profile" class="page">
        <div class="page-header">
          <h1><i class="fas fa-user"></i> My Profile</h1>
          <button class="action-btn edit-btn" id="editProfileBtn">
            <i class="fas fa-edit"></i> Edit Profile
          </button>
        </div>
        
        <div class="profile-section">
          <img src="/static/7.jpg" alt="Profile Picture" class="profile-pic">
          <div class="profile-info">
            <h2 class="profile-name" id="profileName">Mr. Nishant Chorasiya</h2>
            <div class="profile-title" id="profileTitle">Senior Lecturer - Computer Science</div>
            
            <div class="profile-details">
              <div class="detail-item">
                <div class="detail-label">Employee ID</div>
                <div id="employeeId">T001</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Email</div>
                <div id="profileEmail">nishant@polytechnic.edu</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Phone</div>
                <div id="profilePhone">+91 9876543210</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Department</div>
                <div id="profileDept">Computer Engineering</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Subjects</div>
                <div id="profileSubjects">Mobile Computing, Web Development</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Joining Date</div>
                <div id="profileJoinDate">15 June 2018</div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Edit Profile Form (hidden by default) -->
        <div id="editProfileForm" class="card" style="display: none;">
          <h2><i class="fas fa-edit"></i> Edit Profile</h2>
          <form id="profileForm">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="edit-name">Full Name</label>
                <input type="text" id="edit-name" required>
              </div>
              
              <div>
                <label for="edit-title">Title</label>
                <input type="text" id="edit-title" required>
              </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="edit-email">Email</label>
                <input type="email" id="edit-email" required>
              </div>
              
              <div>
                <label for="edit-phone">Phone</label>
                <input type="tel" id="edit-phone" required>
              </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="edit-dept">Department</label>
                <input type="text" id="edit-dept" required>
              </div>
              
              <div>
                <label for="edit-subjects">Subjects</label>
                <input type="text" id="edit-subjects" required>
              </div>
            </div>

            <div class="edit-form-buttons">
              <button type="button" class="action-btn delete-btn" id="cancelEditProfile">
                Cancel
              </button>
              <button type="submit" class="action-btn add-btn">
                <i class="fas fa-save"></i> Save Changes
              </button>
            </div>
          </form>
        </div>
        
        <div class="card">
          <h2><i class="fas fa-chart-line"></i> Performance Stats</h2>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
              <h3>Classes Taken This Month</h3>
              <div style="font-size: 2rem; font-weight: bold; color: var(--primary);">24</div>
            </div>
            <div>
              <h3>Average Attendance</h3>
              <div style="font-size: 2rem; font-weight: bold; color: var(--success);">89%</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Timetable Page -->
      <div id="timetable" class="page">
        <div class="page-header">
          <h1><i class="fas fa-calendar-alt"></i> Polytechnic Timetable</h1>
          <button class="action-btn add-btn" onclick="showAddTimetableForm()">
            <i class="fas fa-plus"></i> Add Class
          </button>
        </div>
        
        <div class="card">
          <h2>Weekly Schedule (10:30 AM - 5:00 PM)</h2>
          <div class="schedule-grid">
            <div class="schedule-header">Time/Day</div>
            <div class="schedule-header">Monday</div>
            <div class="schedule-header">Tuesday</div>
            <div class="schedule-header">Wednesday</div>
            <div class="schedule-header">Thursday</div>
            <div class="schedule-header">Friday</div>
            
            <!-- Morning Slot -->
            <div class="schedule-header">10:30 AM - 12:00 PM</div>
            <div class="schedule-cell">
              <div class="schedule-item" id="class-mc1">
                <strong>Mobile Computing</strong><br>
                Diploma 3rd Year<br>
                Mr. Nishant Chorasiya<br>
                Lab 1
                <div class="edit-form" id="edit-class-mc1">
                  <input type="text" value="Mobile Computing" placeholder="Subject">
                  <input type="text" value="Diploma 3rd Year" placeholder="Class">
                  <input type="text" value="Mr. Nishant Chorasiya" placeholder="Teacher">
                  <input type="text" value="Lab 1" placeholder="Room">
                  <div class="edit-form-buttons">
                    <button type="button" class="action-btn delete-btn" onclick="cancelEdit('class-mc1')">Cancel</button>
                    <button type="button" class="action-btn add-btn" onclick="saveEdit('class-mc1')">Save</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="schedule-cell">
              <div class="schedule-item" id="class-st1">
                <strong>Software Testing</strong><br>
                Diploma 2nd Year<br>
                Ms. Goldi Bajaj<br>
                Lab 2
                <div class="edit-form" id="edit-class-st1">
                  <input type="text" value="Software Testing" placeholder="Subject">
                  <input type="text" value="Diploma 2nd Year" placeholder="Class">
                  <input type="text" value="Ms. Goldi Bajaj" placeholder="Teacher">
                  <input type="text" value="Lab 2" placeholder="Room">
                  <div class="edit-form-buttons">
                    <button type="button" class="action-btn delete-btn" onclick="cancelEdit('class-st1')">Cancel</button>
                    <button type="button" class="action-btn add-btn" onclick="saveEdit('class-st1')">Save</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="schedule-cell">
              <div class="schedule-item" id="class-en1">
                <strong>Entrepreneurship</strong><br>
                Diploma 3rd Year<br>
                Mr. Ishu Sharma<br>
                Room 201
                <div class="edit-form" id="edit-class-en1">
                  <input type="text" value="Entrepreneurship" placeholder="Subject">
                  <input type="text" value="Diploma 3rd Year" placeholder="Class">
                  <input type="text" value="Mr. Ishu Sharma" placeholder="Teacher">
                  <input type="text" value="Room 201" placeholder="Room">
                  <div class="edit-form-buttons">
                    <button type="button" class="action-btn delete-btn" onclick="cancelEdit('class-en1')">Cancel</button>
                    <button type="button" class="action-btn add-btn" onclick="saveEdit('class-en1')">Save</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="schedule-cell">
              <div class="schedule-item" id="class-ai1">
                <strong>Artificial Intelligence</strong><br>
                Diploma 2nd Year<br>
                Ms. Tripti Diwadi<br>
                Lab 3
                <div class="edit-form" id="edit-class-ai1">
                  <input type="text" value="Artificial Intelligence" placeholder="Subject">
                  <input type="text" value="Diploma 2nd Year" placeholder="Class">
                  <input type="text" value="Ms. Tripti Diwadi" placeholder="Teacher">
                  <input type="text" value="Lab 3" placeholder="Room">
                  <div class="edit-form-buttons">
                    <button type="button" class="action-btn delete-btn" onclick="cancelEdit('class-ai1')">Cancel</button>
                    <button type="button" class="action-btn add-btn" onclick="saveEdit('class-ai1')">Save</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="schedule-cell">
              <div class="no-class">No Class Scheduled</div>
            </div>
            
            <!-- Afternoon Slot 1 -->
            <div class="schedule-header">12:30 PM - 02:00 PM</div>
            <div class="schedule-cell">
              <div class="schedule-item" id="class-ai2">
                <strong>Artificial Intelligence</strong><br>
                Diploma 2nd Year<br>
                Ms. Tripti Diwadi<br>
                Room 205
                <div class="edit-form" id="edit-class-ai2">
                  <input type="text" value="Artificial Intelligence" placeholder="Subject">
                  <input type="text" value="Diploma 2nd Year" placeholder="Class">
                  <input type="text" value="Ms. Tripti Diwadi" placeholder="Teacher">
                  <input type="text" value="Room 205" placeholder="Room">
                  <div class="edit-form-buttons">
                    <button type="button" class="action-btn delete-btn" onclick="cancelEdit('class-ai2')">Cancel</button>
                    <button type="button" class="action-btn add-btn" onclick="saveEdit('class-ai2')">Save</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="schedule-cell">
              <div class="schedule-item" id="class-pm1">
                <strong>Project Management</strong><br>
                Diploma 3rd Year<br>
                Mr. Ishu Sharma<br>
                Room 302
                <div class="edit-form" id="edit-class-pm1">
                  <input type="text" value="Project Management" placeholder="Subject">
                  <input type="text" value="Diploma 3rd Year" placeholder="Class">
                  <input type="text" value="Mr. Ishu Sharma" placeholder="Teacher">
                  <input type="text" value="Room 302" placeholder="Room">
                  <div class="edit-form-buttons">
                    <button type="button" class="action-btn delete-btn" onclick="cancelEdit('class-pm1')">Cancel</button>
                    <button type="button" class="action-btn add-btn" onclick="saveEdit('class-pm1')">Save</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="schedule-cell">
              <div class="no-class">No Class Scheduled</div>
            </div>
            <div class="schedule-cell">
              <div class="schedule-item" id="class-mc2">
                <strong>Mobile Computing</strong><br>
                Diploma 3rd Year<br>
                Mr. Nishant Chorasiya<br>
                Lab 1
                <div class="edit-form" id="edit-class-mc2">
                  <input type="text" value="Mobile Computing" placeholder="Subject">
                  <input type="text" value="Diploma 3rd Year" placeholder="Class">
                  <input type="text" value="Mr. Nishant Chorasiya" placeholder="Teacher">
                  <input type="text" value="Lab 1" placeholder="Room">
                  <div class="edit-form-buttons">
                    <button type="button" class="action-btn delete-btn" onclick="cancelEdit('class-mc2')">Cancel</button>
                    <button type="button" class="action-btn add-btn" onclick="saveEdit('class-mc2')">Save</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="schedule-cell">
              <div class="schedule-item" id="class-st2">
                <strong>Software Testing</strong><br>
                Diploma 3rd Year<br>
                Ms. Tripti Diwadi <br>
                Lab 2
                <div class="edit-form" id="edit-class-st2">
                  <input type="text" value="Software Testing" placeholder="Subject">
                  <input type="text" value="Diploma 2nd Year" placeholder="Class">
                  <input type="text" value="Ms. Goldi Bajaj" placeholder="Teacher">
                  <input type="text" value="Lab 2" placeholder="Room">
                  <div class="edit-form-buttons">
                    <button type="button" class="action-btn delete-btn" onclick="cancelEdit('class-st2')">Cancel</button>
                    <button type="button" class="action-btn add-btn" onclick="saveEdit('class-st2')">Save</button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Afternoon Slot 2 -->
            <div class="schedule-header">03:00 PM - 04:30 PM</div>
            <div class="schedule-cell">
              <div class="schedule-item" id="class-pm2">
                <strong>Project Management</strong><br>
                Diploma 3rd Year<br>
                Ms. Goldi Bajaj<br>
                Room 302
                <div class="edit-form" id="edit-class-pm2">
                  <input type="text" value="Project Management" placeholder="Subject">
                  <input type="text" value="Diploma 3rd Year" placeholder="Class">
                  <input type="text" value="Mr. Ishu Sharma" placeholder="Teacher">
                  <input type="text" value="Room 302" placeholder="Room">
                  <div class="edit-form-buttons">
                    <button type="button" class="action-btn delete-btn" onclick="cancelEdit('class-pm2')">Cancel</button>
                    <button type="button" class="action-btn add-btn" onclick="saveEdit('class-pm2')">Save</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="schedule-cell">
              <div class="no-class">No Class Scheduled</div>
            </div>
            <div class="schedule-cell">
              <div class="schedule-item" id="class-en2">
                <strong>Entrepreneurship</strong><br>
                Diploma 3rd Year<br>
                Mr. Ishu Sharma<br>
                Room 201
                <div class="edit-form" id="edit-class-en2">
                  <input type="text" value="Entrepreneurship" placeholder="Subject">
                  <input type="text" value="Diploma 3rd Year" placeholder="Class">
                  <input type="text" value="Mr. Ishu Sharma" placeholder="Teacher">
                  <input type="text" value="Room 201" placeholder="Room">
                  <div class="edit-form-buttons">
                    <button type="button" class="action-btn delete-btn" onclick="cancelEdit('class-en2')">Cancel</button>
                    <button type="button" class="action-btn add-btn" onclick="saveEdit('class-en2')">Save</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="schedule-cell">
              <div class="no-class">No Class Scheduled</div>
            </div>
            <div class="schedule-cell">
              <div class="schedule-item" id="class-ai3">
                <strong>Artificial Intelligence</strong><br>
                Diploma 2nd Year<br>
                Mr. Ishu Sharma<br>
                Lab 3
                <div class="edit-form" id="edit-class-ai3">
                  <input type="text" value="Artificial Intelligence" placeholder="Subject">
                  <input type="text" value="Diploma 2nd Year" placeholder="Class">
                  <input type="text" value="Ms. Tripti Diwadi" placeholder="Teacher">
                  <input type="text" value="Lab 3" placeholder="Room">
                  <div class="edit-form-buttons">
                    <button type="button" class="action-btn delete-btn" onclick="cancelEdit('class-ai3')">Cancel</button>
                    <button type="button" class="action-btn add-btn" onclick="saveEdit('class-ai3')">Save</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Add Timetable Form (hidden by default) -->
        <div id="addTimetableForm" class="card" style="display: none;">
          <h2>Add New Class to Timetable</h2>
          <form id="timetableForm">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="timetable-day">Day</label>
                <select id="timetable-day" required>
                  <option value="">-- Select Day --</option>
                  <option>Monday</option>
                  <option>Tuesday</option>
                  <option>Wednesday</option>
                  <option>Thursday</option>
                  <option>Friday</option>
                </select>
              </div>
              
              <div>
                <label for="timetable-time">Time Slot</label>
                <select id="timetable-time" required>
                  <option value="">-- Select Time --</option>
                  <option>10:30 AM - 12:00 PM</option>
                  <option>12:30 PM - 02:00 PM</option>
                  <option>03:00 PM - 04:30 PM</option>
                </select>
              </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="timetable-subject">Subject</label>
                <select id="timetable-subject" required>
                  <option value="">-- Select Subject --</option>
                  <option>Mobile Computing</option>
                  <option>Entrepreneurship and Start-ups</option>
                  <option>Software Testing</option>
                  <option>Project Management</option>
                  <option>Artificial Intelligence</option>
                </select>
              </div>
              
              <div>
                <label for="timetable-class">Class</label>
                <select id="timetable-class" required>
                  <option value="">-- Select Class --</option>
                  <option>Diploma 1st Year</option>
                  <option>Diploma 2nd Year</option>
                  <option>Diploma 3rd Year</option>
                </select>
              </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="timetable-teacher">Teacher</label>
                <select id="timetable-teacher" required>
                  <option value="">-- Select Teacher --</option>
                  <option>Mr. Nishant Chorasiya</option>
                  <option>Mr. Ishu Sharma</option>
                  <option>Ms. Tripti Diwadi</option>
                  <option>Ms. Goldi Bajaj</option>
                </select>
              </div>
              
              <div>
                <label for="timetable-room">Room/Lab</label>
                <input type="text" id="timetable-room" required placeholder="Room number or Lab">
              </div>
            </div>

            <button type="submit">
              <i class="fas fa-calendar-plus"></i> Add to Timetable
            </button>
            <button type="button" class="action-btn delete-btn" onclick="hideAddTimetableForm()" style="margin-left: 10px;">
              Cancel
            </button>
          </form>
        </div>
      </div>

      <!-- Attendance Page -->
      <div id="attendance" class="page">
        <div class="page-header">
          <h1><i class="fas fa-calendar-check"></i> Attendance Management</h1>
          <div>
            <select id="attendance-filter" style="padding: 8px; border-radius: 6px; border: 1px solid #ddd;">
              <option>All Classes</option>
              <option>Diploma 1st Year</option>
              <option>Diploma 2nd Year</option>
              <option>Diploma 3rd Year</option>
            </select>
            <button class="action-btn add-btn" style="margin-left: 10px;" onclick="openCameraModal()">
              <i class="fas fa-camera"></i> Take Attendance
            </button>
          </div>
        </div>
        
        <div class="card">
          <h2>Today's Attendance Records</h2>
          <table>
            <thead>
              <tr>
                <th>Class</th>
                <th>Subject</th>
                <th>Time</th>
                <th>Present</th>
                <th>Absent</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Diploma 3rd Year</td>
                <td>Mobile Computing</td>
                <td>10:30 AM - 12:00 PM</td>
                <td>32</td>
                <td>3</td>
                <td><span class="attendance-status present">Completed</span></td>
                <td>
                  <button class="action-btn view-btn" onclick="viewAttendance('MC101', 'Diploma 3rd Year')">
                    <i class="fas fa-eye"></i> View
                  </button>
                  <button class="action-btn edit-btn" onclick="editAttendance('MC101', 'Diploma 3rd Year')">
                    <i class="fas fa-edit"></i> Edit
                  </button>
                </td>
              </tr>
              <tr>
                <td>Diploma 2nd Year</td>
                <td>Artificial Intelligence</td>
                <td>12:30 PM - 02:00 PM</td>
                <td>-</td>
                <td>-</td>
                <td><span class="attendance-status late">Pending</span></td>
                <td>
                  <button class="action-btn view-btn" onclick="takeAttendance('AI201', 'Diploma 2nd Year')">
                    <i class="fas fa-camera"></i> Take
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="card">
          <h2>Attendance History</h2>
          <table>
            <thead>
              <tr>
                <th>Date</th>
                <th>Class</th>
                <th>Subject</th>
                <th>Present</th>
                <th>Absent</th>
                <th>Percentage</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>15 May 2023</td>
                <td>Diploma 3rd Year</td>
                <td>Mobile Computing</td>
                <td>30</td>
                <td>5</td>
                <td>85.7%</td>
                <td>
                  <button class="action-btn view-btn" onclick="viewAttendance('MC101', 'Diploma 3rd Year', '2023-05-15')">
                    <i class="fas fa-eye"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td>14 May 2023</td>
                <td>Diploma 3rd Year</td>
                <td>Mobile Computing</td>
                <td>28</td>
                <td>7</td>
                <td>80%</td>
                <td>
                  <button class="action-btn view-btn" onclick="viewAttendance('MC101', 'Diploma 3rd Year', '2023-05-14')">
                    <i class="fas fa-eye"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Students Page -->
      <div id="students" class="page">
        <div class="page-header">
          <h1><i class="fas fa-users"></i> Student Management</h1>
          <button class="action-btn add-btn" onclick="showAddStudentForm()">
            <i class="fas fa-plus"></i> Add Student
          </button>
        </div>
        
        <div class="card">
          <h2>All Students</h2>
          <table>
            <thead>
              <tr>
                <th>Student ID</th>
                <th>Name</th>
                <th>Class</th>
                <th>Roll No.</th>
                <th>Face Registered</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr id="student-22013c04026">
                <td>22013c04026</td>
                <td>khushi makode</td>
                <td>Diploma 3rd Year</td>
                <td>1</td>
                <td><i class="fas fa-check"></i></td>
                <td>
                  <button class="action-btn view-btn">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="action-btn edit-btn" onclick="editStudent('22013c04026')">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="action-btn delete-btn" onclick="deleteStudent('22013c04026')">
                    <i class="fas fa-trash"></i>
                  </button>
                </td>
              </tr>
              <tr id="student-22013c04023">
                <td>22013c04023</td>
                <td>Dolly makode</td>
                <td>Diploma 3rd Year</td>
                <td>2</td>
                <td><i class="fas fa-check" style="color: var(--success);"></i></td>
                <td>
                  <button class="action-btn view-btn">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="action-btn edit-btn" onclick="editStudent('22013c04023')">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="action-btn delete-btn" onclick="deleteStudent('22013c04023')">
                    <i class="fas fa-trash"></i>
                  </button>
                </td>
              </tr>
              <tr id="student-23013c04001">
                <td>23013c04001</td>
                <td>jannat pravin</td>
                <td>Diploma 3rd Year</td>
                <td>3</td>
                <td><i class="fas fa-check" style="color: var(--success);"></i></td>
                <td>
                  <button class="action-btn view-btn">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="action-btn edit-btn" onclick="editStudent('23013c04001')">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="action-btn delete-btn" onclick="deleteStudent('23013c04001')">
                    <i class="fas fa-trash"></i>
                  </button>
                </td>
              </tr>
              <tr id="student-22013c04040">
                <td>22013c04040</td>
                <td>Nikhil soni</td>
                <td>Diploma 3rd Year</td>
                <td>4</td>
                <td><i class="fas fa-check" style="color: var(--success);"></i></td>
                <td>
                  <button class="action-btn view-btn">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="action-btn edit-btn" onclick="editStudent('22013c04040')">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="action-btn delete-btn" onclick="deleteStudent('22013c04040')">
                    <i class="fas fa-trash"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <!-- Add Student Form (hidden by default) -->
        <div id="addStudentForm" class="card" style="display: none;">
          <h2>Add New Student</h2>
          <form id="studentForm">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="student-id">Student ID</label>
                <input type="text" id="student-id" required placeholder="e.g. S005">
              </div>
              
              <div>
                <label for="student-name">Full Name</label>
                <input type="text" id="student-name" required placeholder="e.g. Rahul Sharma">
              </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="student-class">Class</label>
                <select id="student-class" required>
                  <option value="">-- Select Class --</option>
                  <option>Diploma 1st Year</option>
                  <option>Diploma 2nd Year</option>
                  <option>Diploma 3rd Year</option>
                </select>
              </div>
              
              <div>
                <label for="student-roll">Roll Number</label>
                <input type="number" id="student-roll" required placeholder="e.g. 5">
              </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="student-email">Email</label>
                <input type="email" id="student-email" placeholder="student@poly.edu">
              </div>
              
              <div>
                <label for="student-phone">Phone</label>
                <input type="tel" id="student-phone" placeholder="+91 XXXXXXXXXX">
              </div>
            </div>

            <label>Register Face</label>
            <div style="border: 2px dashed #ccc; padding: 20px; text-align: center; border-radius: 8px; margin-top: 10px;">
              <button type="button" class="action-btn add-btn" onclick="registerStudentFace()">
                <i class="fas fa-camera"></i> Capture Face
              </button>
              <p style="margin-top: 10px; color: #666;">Face data will be used for attendance recognition</p>
            </div>

            <button type="submit" style="margin-top: 20px;">
              <i class="fas fa-user-plus"></i> Add Student
            </button>
            <button type="button" class="action-btn delete-btn" onclick="hideAddStudentForm()" style="margin-left: 10px;">
              Cancel
            </button>
          </form>
        </div>
        
        <!-- Edit Student Form (hidden by default) -->
        <div id="editStudentForm" class="card" style="display: none;">
          <h2>Edit Student</h2>
          <form id="studentEditForm">
            <input type="hidden" id="edit-student-id">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="edit-student-name">Full Name</label>
                <input type="text" id="edit-student-name" required>
              </div>
              
              <div>
                <label for="edit-student-roll">Roll Number</label>
                <input type="number" id="edit-student-roll" required>
              </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="edit-student-class">Class</label>
                <select id="edit-student-class" required>
                  <option value="">-- Select Class --</option>
                  <option>Diploma 1st Year</option>
                  <option>Diploma 2nd Year</option>
                  <option>Diploma 3rd Year</option>
                </select>
              </div>
              
              <div>
                <label for="edit-student-face">Face Registered</label>
                <input type="text" id="edit-student-face" readonly>
              </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="edit-student-email">Email</label>
                <input type="email" id="edit-student-email">
              </div>
              
              <div>
                <label for="edit-student-phone">Phone</label>
                <input type="tel" id="edit-student-phone">
              </div>
            </div>

            <div class="edit-form-buttons">
              <button type="button" class="action-btn delete-btn" onclick="cancelEditStudent()">
                Cancel
              </button>
              <button type="submit" class="action-btn add-btn">
                <i class="fas fa-save"></i> Save Changes
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Subjects Page -->
      <div id="subjects" class="page">
        <div class="page-header">
          <h1><i class="fas fa-book"></i> Subject Management</h1>
          <button class="action-btn add-btn" onclick="showAddSubjectForm()">
            <i class="fas fa-plus"></i> Add Subject
          </button>
        </div>
        
        <div class="card">
          <h2>All Subjects</h2>
          <table>
            <thead>
              <tr>
                <th>Subject Code</th>
                <th>Subject Name</th>
                <th>Classes</th>
                <th>Teachers</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr id="subject-MC501">
                <td>MC501</td>
                <td>Mobile Computing</td>
                <td>Diploma 3rd Year</td>
                <td>Mr. Nishant Chorasiya</td>
                <td>
                  <button class="action-btn view-btn">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="action-btn edit-btn" onclick="editSubject('MC501')">
                    <i class="fas fa-edit"></i>
                  </button>
                </td>
              </tr>
              <tr id="subject-ES502">
                <td>ES502</td>
                <td>Entrepreneurship and Start-ups</td>
                <td>Diploma 3rd Year</td>
                <td>Mr. Ishu Sharma</td>
                <td>
                  <button class="action-btn view-btn">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="action-btn edit-btn" onclick="editSubject('ES502')">
                    <i class="fas fa-edit"></i>
                  </button>
                </td>
              </tr>
              <tr id="subject-ST503">
                <td>ST503</td>
                <td>Software Testing</td>
                <td>Diploma 2nd Year</td>
                <td>Ms. Tripti Diwadi</td>
                <td>
                  <button class="action-btn view-btn">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="action-btn edit-btn" onclick="editSubject('ST503')">
                    <i class="fas fa-edit"></i>
                  </button>
                </td>
              </tr>
              <tr id="subject-PM504">
                <td>PM504</td>
                <td>Project Management</td>
                <td>Diploma 3rd Year</td>
                <td>Ms. Goldi Bajaj</td>
                <td>
                  <button class="action-btn view-btn">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="action-btn edit-btn" onclick="editSubject('PM504')">
                    <i class="fas fa-edit"></i>
                  </button>
                </td>
              </tr>
              <tr id="subject-AI505">
                <td>AI505</td>
                <td>Artificial Intelligence</td>
                <td>Diploma 2nd Year</td>
                <td>Ms. Ishu Sharma</td>
                <td>
                  <button class="action-btn view-btn">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="action-btn edit-btn" onclick="editSubject('AI505')">
                    <i class="fas fa-edit"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <!-- Add Subject Form (hidden by default) -->
        <div id="addSubjectForm" class="card" style="display: none;">
          <h2>Add New Subject</h2>
          <form id="subjectForm">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="subject-code">Subject Code</label>
                <input type="text" id="subject-code" required placeholder="e.g. MC501">
              </div>
              
              <div>
                <label for="subject-name">Subject Name</label>
                <input type="text" id="subject-name" required placeholder="e.g. Mobile Computing">
              </div>
            </div>

            <label for="subject-classes">Class</label>
            <select id="subject-classes" required>
              <option value="">-- Select Class --</option>
              <option>Diploma 1st Year</option>
              <option>Diploma 2nd Year</option>
              <option>Diploma 3rd Year</option>
            </select>

            <label for="subject-teacher">Teacher</label>
            <select id="subject-teacher" required>
              <option value="">-- Select Teacher --</option>
              <option>Mr. Nishant Chorasiya</option>
              <option>Mr. Ishu Sharma</option>
              <option>Ms. Tripti Diwadi</option>
              <option>Ms. Goldi Bajaj</option>
            </select>

            <button type="submit">
              <i class="fas fa-plus-circle"></i> Add Subject
            </button>
            <button type="button" class="action-btn delete-btn" onclick="hideAddSubjectForm()" style="margin-left: 10px;">
              Cancel
            </button>
          </form>
        </div>
        
        <!-- Edit Subject Form (hidden by default) -->
        <div id="editSubjectForm" class="card" style="display: none;">
          <h2>Edit Subject</h2>
          <form id="subjectEditForm">
            <input type="hidden" id="edit-subject-code">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <label for="edit-subject-name">Subject Name</label>
                <input type="text" id="edit-subject-name" required>
              </div>
              
              <div>
                <label for="edit-subject-class">Class</label>
                <select id="edit-subject-class" required>
                  <option value="">-- Select Class --</option>
                  <option>Diploma 1st Year</option>
                  <option>Diploma 2nd Year</option>
                  <option>Diploma 3rd Year</option>
                </select>
              </div>
            </div>

            <label for="edit-subject-teacher">Teacher</label>
            <select id="edit-subject-teacher" required>
              <option value="">-- Select Teacher --</option>
              <option>Mr. Nishant Chorasiya</option>
              <option>Mr. Ishu Sharma</option>
              <option>Ms. Tripti Diwadi</option>
              <option>Ms. Goldi Bajaj</option>
            </select>

            <div class="edit-form-buttons">
              <button type="button" class="action-btn delete-btn" onclick="cancelEditSubject()">
                Cancel
              </button>
              <button type="submit" class="action-btn add-btn">
                <i class="fas fa-save"></i> Save Changes
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Camera Modal for Attendance -->
  <div id="camera-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeCameraModal()">&times;</span>
      <h2>Take Attendance</h2>
      
      <div class="camera-container">
        <video id="camera-preview" autoplay playsinline></video>
        <canvas id="face-overlay"></canvas>
      </div>
      
      <div>
        <label>Select Class:</label>
        <select id="attendance-class" style="width: 100%; padding: 10px; margin-bottom: 15px;">
          <option value="D3C1">Diploma 3rd Year - Computer</option>
          <option value="D2C1">Diploma 2nd Year - Computer</option>
          <option value="D1C1">Diploma 1st Year - Computer</option>
        </select>
        
        <label>Select Subject:</label>
        <select id="attendance-subject" style="width: 100%; padding: 10px; margin-bottom: 15px;">
          <option value="MC101">Mobile Computing</option>
          <option value="AI201">Artificial Intelligence</option>
          <option value="WD301">Web Development</option>
        </select>
      </div>
      
      <div class="camera-controls">
        <button class="capture-btn" onclick="captureAttendance()">
          <i class="fas fa-camera"></i> Capture Attendance
        </button>
        <button class="action-btn delete-btn" onclick="closeCameraModal()">
          <i class="fas fa-times"></i> Cancel
        </button>
      </div>
      
      <div id="attendance-result" style="margin-top: 20px; display: none;">
        <h3>Attendance Result</h3>
        <div class="student-attendance-list" id="recognized-students">
          <!-- Student list will be populated here -->
        </div>
        <button class="action-btn add-btn" style="margin-top: 15px;" onclick="saveAttendance()">
          <i class="fas fa-save"></i> Save Attendance
        </button>
      </div>
    </div>
  </div>

  <!-- View Attendance Modal -->
  <div id="view-attendance-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeViewAttendanceModal()">&times;</span>
      <h2 id="view-attendance-title">Attendance Details</h2>
      
      <div class="student-attendance-list" id="attendance-details-list">
        <!-- Attendance details will be populated here -->
      </div>
      
      <div style="margin-top: 20px; display: flex; justify-content: space-between;">
        <div>
          <strong>Total Present:</strong> <span id="total-present">0</span> | 
          <strong>Total Absent:</strong> <span id="total-absent">0</span> | 
          <strong>Percentage:</strong> <span id="attendance-percentage">0%</span>
        </div>
        <button class="action-btn delete-btn" onclick="closeViewAttendanceModal()">
          <i class="fas fa-times"></i> Close
        </button>
      </div>
    </div>
  </div>

  <script>
    // Navigation
    const navItems = document.querySelectorAll('.sidebar li[data-page]');
    const pages = document.querySelectorAll('.page');

    navItems.forEach(item => {
      item.addEventListener('click', () => {
        const target = item.getAttribute('data-page');
        navItems.forEach(i => i.classList.remove('active'));
        item.classList.add('active');
        pages.forEach(p => p.classList.remove('active-page'));
        document.getElementById(target).classList.add('active-page');
      });
    });

    // Helper function to show specific page
    function showPage(pageId) {
      navItems.forEach(i => i.classList.remove('active'));
      document.querySelector(`.sidebar li[data-page="${pageId}"]`).classList.add('active');
      pages.forEach(p => p.classList.remove('active-page'));
      document.getElementById(pageId).classList.add('active-page');
    }

    // Current Date
    function updateCurrentDate() {
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const today = new Date();
      document.getElementById('current-date').textContent = today.toLocaleDateString('en-US', options);
    }
    
    updateCurrentDate();

    // Timetable Form Toggle
    function showAddTimetableForm() {
      document.getElementById('addTimetableForm').style.display = 'block';
    }
    
    function hideAddTimetableForm() {
      document.getElementById('addTimetableForm').style.display = 'none';
    }

    // Subject Form Toggle
    function showAddSubjectForm() {
      document.getElementById('addSubjectForm').style.display = 'block';
    }
    
    function hideAddSubjectForm() {
      document.getElementById('addSubjectForm').style.display = 'none';
    }

    // Student Form Toggle
    function showAddStudentForm() {
      document.getElementById('addStudentForm').style.display = 'block';
    }
    
    function hideAddStudentForm() {
      document.getElementById('addStudentForm').style.display = 'none';
    }

    // Form Submissions
    document.getElementById('timetableForm').addEventListener('submit', e => {
      e.preventDefault();
      alert('Class added to timetable successfully!');
      hideAddTimetableForm();
      e.target.reset();
    });
    
    document.getElementById('subjectForm').addEventListener('submit', e => {
      e.preventDefault();
      alert('Subject added successfully!');
      hideAddSubjectForm();
      e.target.reset();
    });
    
    document.getElementById('studentForm').addEventListener('submit', e => {
      e.preventDefault();
      alert('Student added successfully!');
      hideAddStudentForm();
      e.target.reset();
    });

    // Edit Profile Functionality
    document.getElementById('editProfileBtn').addEventListener('click', function() {
      document.getElementById('profile').style.display = 'none';
      document.getElementById('editProfileForm').style.display = 'block';
      
      // Populate form with current data
      document.getElementById('edit-name').value = document.getElementById('profileName').textContent;
      document.getElementById('edit-title').value = document.getElementById('profileTitle').textContent;
      document.getElementById('edit-email').value = document.getElementById('profileEmail').textContent;
      document.getElementById('edit-phone').value = document.getElementById('profilePhone').textContent;
      document.getElementById('edit-dept').value = document.getElementById('profileDept').textContent;
      document.getElementById('edit-subjects').value = document.getElementById('profileSubjects').textContent;
    });
    
    document.getElementById('cancelEditProfile').addEventListener('click', function() {
      document.getElementById('profile').style.display = 'block';
      document.getElementById('editProfileForm').style.display = 'none';
    });
    
    document.getElementById('profileForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Update profile with new data
      document.getElementById('profileName').textContent = document.getElementById('edit-name').value;
      document.getElementById('profileTitle').textContent = document.getElementById('edit-title').value;
      document.getElementById('profileEmail').textContent = document.getElementById('edit-email').value;
      document.getElementById('profilePhone').textContent = document.getElementById('edit-phone').value;
      document.getElementById('profileDept').textContent = document.getElementById('edit-dept').value;
      document.getElementById('profileSubjects').textContent = document.getElementById('edit-subjects').value;
      
      alert('Profile updated successfully!');
      document.getElementById('profile').style.display = 'block';
      document.getElementById('editProfileForm').style.display = 'none';
    });

    // Edit Timetable Class
    function editClass(classId) {
      const classItem = document.getElementById(classId);
      const editForm = document.getElementById('edit-' + classId);
      
      classItem.style.display = 'none';
      editForm.classList.add('active');
    }
    
    function cancelEdit(classId) {
      const classItem = document.getElementById(classId);
      const editForm = document.getElementById('edit-' + classId);
      
      classItem.style.display = 'block';
      editForm.classList.remove('active');
    }
    
    function saveEdit(classId) {
      const classItem = document.getElementById(classId);
      const editForm = document.getElementById('edit-' + classId);
      const inputs = editForm.querySelectorAll('input');
      
      // Update the class information
      const lines = classItem.innerHTML.split('<br>');
      lines[0] = `<strong>${inputs[0].value}</strong>`;
      lines[1] = inputs[1].value;
      lines[2] = inputs[2].value;
      lines[3] = inputs[3].value;
      
      classItem.innerHTML = lines.join('<br>') + 
        `<div class="edit-form" id="edit-${classId}">${editForm.innerHTML}</div>`;
      
      classItem.style.display = 'block';
      editForm.classList.remove('active');
      
      alert('Class information updated successfully!');
    }

    // Edit Student
    function editStudent(studentId) {
      const studentRow = document.getElementById('student-' + studentId);
      const cells = studentRow.querySelectorAll('td');
      
      // Populate edit form
      document.getElementById('edit-student-id').value = studentId;
      document.getElementById('edit-student-name').value = cells[1].textContent;
      document.getElementById('edit-student-roll').value = cells[3].textContent;
      document.getElementById('edit-student-class').value = cells[2].textContent;
      document.getElementById('edit-student-face').value = cells[4].querySelector('i') ? 'Yes' : 'No';
      document.getElementById('edit-student-email').value = 'student' + studentId + '@poly.edu';
      document.getElementById('edit-student-phone').value = '+91 98765' + Math.floor(10000 + Math.random() * 90000);
      
      // Show edit form
      document.getElementById('addStudentForm').style.display = 'none';
      document.getElementById('editStudentForm').style.display = 'block';
    }
    
    function cancelEditStudent() {
      document.getElementById('editStudentForm').style.display = 'none';
    }
    
    document.getElementById('studentEditForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const studentId = document.getElementById('edit-student-id').value;
      const studentRow = document.getElementById('student-' + studentId);
      const cells = studentRow.querySelectorAll('td');
      
      // Update student information
      cells[1].textContent = document.getElementById('edit-student-name').value;
      cells[2].textContent = document.getElementById('edit-student-class').value;
      cells[3].textContent = document.getElementById('edit-student-roll').value;
      
      alert('Student information updated successfully!');
      document.getElementById('editStudentForm').style.display = 'none';
    });

    // Delete Student
    function deleteStudent(studentId) {
      if (confirm('Are you sure you want to delete this student?')) {
        document.getElementById('student-' + studentId).remove();
        alert('Student deleted successfully!');
      }
    }

    // Edit Subject
    function editSubject(subjectCode) {
      const subjectRow = document.getElementById('subject-' + subjectCode);
      const cells = subjectRow.querySelectorAll('td');
      
      // Populate edit form
      document.getElementById('edit-subject-code').value = subjectCode;
      document.getElementById('edit-subject-name').value = cells[1].textContent;
      document.getElementById('edit-subject-class').value = cells[2].textContent;
      document.getElementById('edit-subject-teacher').value = cells[3].textContent;
      
      // Show edit form
      document.getElementById('addSubjectForm').style.display = 'none';
      document.getElementById('editSubjectForm').style.display = 'block';
    }
    
    function cancelEditSubject() {
      document.getElementById('editSubjectForm').style.display = 'none';
    }
    
    document.getElementById('subjectEditForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const subjectCode = document.getElementById('edit-subject-code').value;
      const subjectRow = document.getElementById('subject-' + subjectCode);
      const cells = subjectRow.querySelectorAll('td');
      
      // Update subject information
      cells[1].textContent = document.getElementById('edit-subject-name').value;
      cells[2].textContent = document.getElementById('edit-subject-class').value;
      cells[3].textContent = document.getElementById('edit-subject-teacher').value;
      
      alert('Subject information updated successfully!');
      document.getElementById('editSubjectForm').style.display = 'none';
    });

    // Edit Attendance
    function editAttendance(subjectCode, className) {
      alert('Editing attendance for ' + subjectCode + ' - ' + className + '\nIn a real application, this would open an edit interface.');
    }

    // Camera functionality for attendance
    let stream = null;
    let faceDetectionInterval = null;
    let recognizedStudents = [];
    
    function openCameraModal() {
      const modal = document.getElementById('camera-modal');
      modal.style.display = 'flex';
      document.getElementById('attendance-result').style.display = 'none';
      
      // Access camera
      navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } })
        .then(function(s) {
          stream = s;
          const video = document.getElementById('camera-preview');
          video.srcObject = stream;
          
          // Start face detection (simulated in this demo)
          faceDetectionInterval = setInterval(simulateFaceDetection, 1000);
        })
        .catch(function(err) {
          console.error("Error accessing camera: ", err);
          alert("Could not access the camera. Please check permissions.");
        });
    }
    
    function closeCameraModal() {
      const modal = document.getElementById('camera-modal');
      modal.style.display = 'none';
      
      // Stop camera stream
      if (stream) {
        stream.getTracks().forEach(track => track.stop());
        stream = null;
      }
      
      // Stop face detection
      if (faceDetectionInterval) {
        clearInterval(faceDetectionInterval);
        faceDetectionInterval = null;
      }
      
      // Clear face overlay
      const canvas = document.getElementById('face-overlay');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Hide results
      document.getElementById('attendance-result').style.display = 'none';
    }
    
    function simulateFaceDetection() {
      const video = document.getElementById('camera-preview');
      const canvas = document.getElementById('face-overlay');
      
      // Set canvas dimensions to match video
      canvas.width = video.clientWidth;
      canvas.height = video.clientHeight;
      
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Simulate face detection by drawing random boxes
      if (Math.random() > 0.5) {
        const x = Math.random() * (canvas.width - 100);
        const y = Math.random() * (canvas.height - 100);
        const width = 80 + Math.random() * 40;
        const height = width * 1.2;
        
        ctx.strokeStyle = '#00ff00';
        ctx.lineWidth = 2;
        ctx.strokeRect(x, y, width, height);
        
        ctx.fillStyle = 'rgba(0, 255, 0, 0.1)';
        ctx.fillRect(x, y, width, height);
        
        // Add label (in a real app, this would be the recognized student)
        ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
        ctx.fillRect(x, y + height - 20, width, 20);
        
        ctx.fillStyle = '#ffffff';
        ctx.font = '12px Arial';
        ctx.textAlign = 'center';
        ctx.fillText("Recognizing...", x + width/2, y + height - 7);
      }
    }
    
    function captureAttendance() {
      // In a real app, this would capture the image and send for face recognition
      // For demo purposes, we'll simulate recognition of 10 students
      
      const classSelect = document.getElementById('attendance-class');
      const subjectSelect = document.getElementById('attendance-subject');
      
      // Simulate recognized students (10 students)
      recognizedStudents = [
        { id: '22013c04026', name: 'Ghanhyam', roll: 1, status: 'Present', avatar: '/static/golu.jpg' },
        //{ id: '22013c04023', name: 'Dolly makode', roll: 2, status: 'Present', avatar: '' },
       // { id: '23013c04001', name: 'jannat pravin', roll: 3, status: 'Present', avatar: '' },
       // { id: '22013c04040', name: 'Nikhil soni', roll: 4, status: 'Present', avatar: '' } 
      ];
      
      // Display results
      displayAttendanceResults();
      
      // Show results section
      document.getElementById('attendance-result').style.display = 'block';
    }
    
    function displayAttendanceResults() {
      const resultDiv = document.getElementById('recognized-students');
      
      resultDiv.innerHTML = `
        <p>Class: ${document.getElementById('attendance-class').options[document.getElementById('attendance-class').selectedIndex].text}</p>
        <p>Subject: ${document.getElementById('attendance-subject').options[document.getElementById('attendance-subject').selectedIndex].text}</p>
        <div style="margin-top: 15px;">
          ${recognizedStudents.map(student => `
            <div class="student-attendance-item">
              <div class="student-info">
                <img src="${student.avatar}" alt="${student.name}" class="student-avatar">
                <div>
                  <div><strong>${student.name}</strong></div>
                  <div>Roll No: ${student.roll} | ID: ${student.id}</div>
                </div>
              </div>
              <select class="status-select" data-id="${student.id}" onchange="updateStudentStatus('${student.id}', this.value)">
                <option value="Present" ${student.status === 'Present' ? 'selected' : ''}>Present</option>
                <option value="Absent" ${student.status === 'Absent' ? 'selected' : ''}>Absent</option>
                <option value="Late" ${student.status === 'Late' ? 'selected' : ''}>Late</option>
              </select>
            </div>
          `).join('')}
        </div>
      `;
    }
    
    function updateStudentStatus(studentId, status) {
      const student = recognizedStudents.find(s => s.id === studentId);
      if (student) {
        student.status = status;
      }
    }
    
    function saveAttendance() {
      // Calculate attendance stats
      const presentCount = recognizedStudents.filter(s => s.status === 'Present' || s.status === 'Late').length;
      const absentCount = recognizedStudents.filter(s => s.status === 'Absent').length;
      const percentage = Math.round((presentCount / recognizedStudents.length) * 100);
      
      // In a real app, this would save to a database
      alert(`Attendance saved successfully!\nPresent: ${presentCount} | Absent: ${absentCount} | Percentage: ${percentage}%`);
      
      // Update the attendance table on the page
      updateAttendanceTableAfterSave(presentCount, absentCount);
      
      closeCameraModal();
    }
    
    function updateAttendanceTableAfterSave(presentCount, absentCount) {
      const classSelect = document.getElementById('attendance-class');
      const subjectSelect = document.getElementById('attendance-subject');
      const className = classSelect.options[classSelect.selectedIndex].text;
      const subjectName = subjectSelect.options[subjectSelect.selectedIndex].text;
      
      // Find the corresponding row in the attendance table and update it
      const table = document.querySelector('#attendance table tbody');
      const rows = table.querySelectorAll('tr');
      
      for (let row of rows) {
        const cells = row.querySelectorAll('td');
        if (cells[0].textContent.includes(className.split(' - ')[0]) && 
            cells[1].textContent === subjectName) {
          cells[3].textContent = presentCount;
          cells[4].textContent = absentCount;
          cells[5].innerHTML = '<span class="attendance-status present">Completed</span>';
          cells[6].innerHTML = `
            <button class="action-btn view-btn" onclick="viewAttendance('${subjectSelect.value}', '${className.split(' - ')[0]}')">
              <i class="fas fa-eye"></i> View
            </button>
            <button class="action-btn edit-btn" onclick="editAttendance('${subjectSelect.value}', '${className.split(' - ')[0]}')">
              <i class="fas fa-edit"></i> Edit
            </button>
          `;
          break;
        }
      }
    }
    
    function takeAttendance(subjectCode, className) {
      openCameraModal();
      
      // Set the subject and class in the modal
      const subjectSelect = document.getElementById('attendance-subject');
      for (let i = 0; i < subjectSelect.options.length; i++) {
        if (subjectSelect.options[i].value === subjectCode) {
          subjectSelect.selectedIndex = i;
          break;
        }
      }
      
      const classSelect = document.getElementById('attendance-class');
      for (let i = 0; i < classSelect.options.length; i++) {
        if (classSelect.options[i].text.includes(className)) {
          classSelect.selectedIndex = i;
          break;
        }
      }
    }
    
    function viewAttendance(subjectCode, className, date = null) {
      const modal = document.getElementById('view-attendance-modal');
      const title = document.getElementById('view-attendance-title');
      const listDiv = document.getElementById('attendance-details-list');
      
      // Set title
      if (date) {
        title.textContent = `Attendance Details - ${className} - ${subjectCode} - ${date}`;
      } else {
        title.textContent = `Attendance Details - ${className} - ${subjectCode} - Today`;
      }
      
      // Simulate attendance data (in a real app, this would come from a database)
      const attendanceData = [
        { id: '22013c04026', name: 'khushi makode', roll: 1, status: 'Present', avatar: '/static/khushi1.jpg' },
        { id: '22013c04023', name: 'Dolly makode', roll: 2, status: 'Present', avatar: '/static/10.jpg' },
        { id: '23013c04001', name: 'jannat pravin', roll: 3, status: 'Present', avatar: '' },
        { id: '22013c04040', name: 'Nikhil soni', roll: 4, status: 'Present', avatar: '/static/golu.jpg' }
      ];
      
      // Calculate stats
      const presentCount = attendanceData.filter(s => s.status === 'Present' || s.status === 'Late').length;
      const absentCount = attendanceData.filter(s => s.status === 'Absent').length;
      const percentage = Math.round((presentCount / attendanceData.length) * 100);
      
      // Update stats
      document.getElementById('total-present').textContent = presentCount;
      document.getElementById('total-absent').textContent = absentCount;
      document.getElementById('attendance-percentage').textContent = `${percentage}%`;
      
      // Display attendance list
      listDiv.innerHTML = attendanceData.map(student => `
        <div class="student-attendance-item">
          <div class="student-info">
            <img src="${student.avatar}" alt="${student.name}" class="student-avatar">
            <div>
              <div><strong>${student.name}</strong></div>
              <div>Roll No: ${student.roll} | ID: ${student.id}</div>
            </div>
          </div>
          <span class="attendance-status ${student.status.toLowerCase()}">${student.status}</span>
        </div>
      `).join('');
      
      // Show modal
      modal.style.display = 'flex';
    }
    
    function closeViewAttendanceModal() {
      document.getElementById('view-attendance-modal').style.display = 'none';
    }
    
    function registerStudentFace() {
      // In a real app, this would open a camera interface to capture the student's face
      alert("Face registration would open a camera to capture the student's face for recognition. In this demo, we're simulating the process.");
    }

    // Logout button
    document.querySelector('.logout-btn').addEventListener('click', () => {
      if (confirm('Are you sure you want to logout?')) {
        alert('Logged out successfully!');
        window.location.href = '/aboutus';
      }
    });
  </script>
</body>
</html>